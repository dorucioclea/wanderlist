{"ast":null,"code":"import axios from 'axios';\nimport { fetchUser } from './userActions';\nimport { fetchUserTripReports } from './tripReportActions';\nexport var authStart = function authStart() {\n  return {\n    type: \"AUTH_START\"\n  };\n};\nexport var authSucess = function authSucess(token) {\n  return {\n    type: \"AUTH_SUCESS\",\n    token: token\n  };\n};\nexport var authFail = function authFail() {\n  return {\n    type: \"AUTH_FAIL\"\n  };\n};\nexport var passwordResetPending = function passwordResetPending() {\n  return {\n    type: \"PASSWORD_RESET_PENDING\"\n  };\n};\nexport var passwordResetFulfilled = function passwordResetFulfilled() {\n  return {\n    type: \"PASSWORD_RESET_FULFILLED\"\n  };\n};\nexport var passwordResetRejected = function passwordResetRejected() {\n  return {\n    type: \"PASSWORD_RESET_REJECTED\"\n  };\n};\n/*\nThe token stored in localStorage to authenticate the user is removed, logging\nthe user out.\n*/\n\nexport var authLogout = function authLogout() {\n  localStorage.removeItem('token');\n  localStorage.removeItem('username');\n  return {\n    type: \"AUTH_LOGOUT\"\n  };\n};\n/*\nLogs user in using axios and recieves a token from the Django API. This token\nis stored in localStorage.\n*/\n\nexport var authLogin = function authLogin(username, password) {\n  return function (dispatch) {\n    dispatch(authStart());\n    axios.post('http://localhost:8000/api/v1/rest-auth/login/', {\n      username: username,\n      password: password\n    }).then(function (response) {\n      var token = response.data.key;\n      localStorage.setItem('token', token);\n      localStorage.setItem('username', username);\n      dispatch(authSucess(token));\n      dispatch(fetchUser());\n      dispatch(fetchUserTripReports(username));\n    }).catch(function (err) {\n      dispatch(authFail());\n      dispatch({\n        type: \"ADD_ERROR\",\n        error: err\n      });\n    });\n  };\n};\n/*\nSimilar to login, registers a user with the Django REST API which returns a\ntoken to authenticate the user. This token is stored in localStorage.\n*/\n\nexport var authRegister = function authRegister(username, email, password1, password2, home) {\n  return function (dispatch) {\n    localStorage.removeItem('token');\n    dispatch(authStart());\n    axios.post('http://localhost:8000/api/v1/rest-auth/registration/', {\n      username: username,\n      email: email,\n      password1: password1,\n      password2: password2,\n      home: home\n    }).then(function (response) {\n      var token = response.data.key;\n      localStorage.setItem('token', token);\n      localStorage.setItem('username', username);\n      dispatch(authSucess(token));\n      dispatch(fetchUser());\n      dispatch({\n        type: \"ADD_SUCCESS\",\n        success: 'You have successfully registered.'\n      });\n    }).catch(function (err) {\n      dispatch(authFail());\n      dispatch({\n        type: \"ADD_ERROR\",\n        error: err\n      });\n    });\n  };\n};\n/*\nChecks to see if the authentication token exists in localStorage. If a token\nexists, it runs the login function. If no token exits it runs the logout\nfunction.\n*/\n\nexport var authCheckState = function authCheckState() {\n  var token = localStorage.getItem('token');\n  return function (dispatch) {\n    if (token === null) {\n      dispatch(authLogout());\n    } else {\n      dispatch(authSucess(token));\n    }\n  };\n};\nexport var requestPasswordReset = function requestPasswordReset(email) {\n  return function (dispatch) {\n    dispatch(passwordResetPending());\n    axios.post('http://localhost:8000/api/v1/rest-auth/password/reset/', {\n      email: email\n    }).then(function (response) {\n      dispatch(passwordResetFulfilled());\n      dispatch({\n        type: \"ADD_SUCCESS\",\n        success: 'An email has been sent with instructions.'\n      });\n    }).catch(function (err) {\n      dispatch(passwordResetRejected());\n      dispatch({\n        type: \"ADD_ERROR\",\n        error: err\n      });\n      console.log(err);\n    });\n  };\n};","map":{"version":3,"sources":["/Users/peterzernia/projects/countries/src/actions/authActions.js"],"names":["axios","fetchUser","fetchUserTripReports","authStart","type","authSucess","token","authFail","passwordResetPending","passwordResetFulfilled","passwordResetRejected","authLogout","localStorage","removeItem","authLogin","username","password","dispatch","post","then","response","data","key","setItem","catch","err","error","authRegister","email","password1","password2","home","success","authCheckState","getItem","requestPasswordReset","console","log"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,eAA1B;AACA,SAASC,oBAAT,QAAqC,qBAArC;AAEA,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;AAC7B,SAAO;AACLC,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD,CAJM;AAMP,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAAAC,KAAK,EAAI;AACjC,SAAO;AACLF,IAAAA,IAAI,EAAE,aADD;AAELE,IAAAA,KAAK,EAAEA;AAFF,GAAP;AAID,CALM;AAOP,OAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAM;AAC5B,SAAO;AACLH,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD,CAJM;AAMP,OAAO,IAAMI,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAM;AACxC,SAAO;AACLJ,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD,CAJM;AAMP,OAAO,IAAMK,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAM;AAC1C,SAAO;AACLL,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD,CAJM;AAMP,OAAO,IAAMM,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAM;AACzC,SAAO;AACLN,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD,CAJM;AAMP;;;;;AAIA,OAAO,IAAMO,UAAU,GAAG,SAAbA,UAAa,GAAM;AAC9BC,EAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAD,EAAAA,YAAY,CAACC,UAAb,CAAwB,UAAxB;AACA,SAAO;AACLT,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD,CANM;AAQP;;;;;AAIA,OAAO,IAAMU,SAAS,GAAG,SAAZA,SAAY,CAACC,QAAD,EAAWC,QAAX,EAAwB;AAC/C,SAAO,UAAAC,QAAQ,EAAI;AACjBA,IAAAA,QAAQ,CAACd,SAAS,EAAV,CAAR;AACAH,IAAAA,KAAK,CAACkB,IAAN,CAAW,+CAAX,EAA4D;AAC1DH,MAAAA,QAAQ,EAAEA,QADgD;AAE1DC,MAAAA,QAAQ,EAAEA;AAFgD,KAA5D,EAIGG,IAJH,CAIQ,UAAAC,QAAQ,EAAI;AAChB,UAAMd,KAAK,GAAGc,QAAQ,CAACC,IAAT,CAAcC,GAA5B;AACAV,MAAAA,YAAY,CAACW,OAAb,CAAqB,OAArB,EAA8BjB,KAA9B;AACAM,MAAAA,YAAY,CAACW,OAAb,CAAqB,UAArB,EAAiCR,QAAjC;AACAE,MAAAA,QAAQ,CAACZ,UAAU,CAACC,KAAD,CAAX,CAAR;AACAW,MAAAA,QAAQ,CAAChB,SAAS,EAAV,CAAR;AACAgB,MAAAA,QAAQ,CAACf,oBAAoB,CAACa,QAAD,CAArB,CAAR;AACD,KAXH,EAYGS,KAZH,CAYS,UAAAC,GAAG,EAAI;AACZR,MAAAA,QAAQ,CAACV,QAAQ,EAAT,CAAR;AACAU,MAAAA,QAAQ,CAAC;AAACb,QAAAA,IAAI,EAAE,WAAP;AAAoBsB,QAAAA,KAAK,EAAED;AAA3B,OAAD,CAAR;AACD,KAfH;AAgBD,GAlBD;AAmBD,CApBM;AAsBP;;;;;AAIA,OAAO,IAAME,YAAY,GAAG,SAAfA,YAAe,CAACZ,QAAD,EAAWa,KAAX,EAAkBC,SAAlB,EAA6BC,SAA7B,EAAwCC,IAAxC,EAAiD;AAC3E,SAAO,UAAAd,QAAQ,EAAI;AACjBL,IAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAI,IAAAA,QAAQ,CAACd,SAAS,EAAV,CAAR;AACAH,IAAAA,KAAK,CAACkB,IAAN,CAAW,sDAAX,EAAmE;AACjEH,MAAAA,QAAQ,EAAEA,QADuD;AAEjEa,MAAAA,KAAK,EAAEA,KAF0D;AAGjEC,MAAAA,SAAS,EAAEA,SAHsD;AAIjEC,MAAAA,SAAS,EAAEA,SAJsD;AAKjEC,MAAAA,IAAI,EAAEA;AAL2D,KAAnE,EAOGZ,IAPH,CAOQ,UAAAC,QAAQ,EAAI;AAChB,UAAMd,KAAK,GAAGc,QAAQ,CAACC,IAAT,CAAcC,GAA5B;AACAV,MAAAA,YAAY,CAACW,OAAb,CAAqB,OAArB,EAA8BjB,KAA9B;AACAM,MAAAA,YAAY,CAACW,OAAb,CAAqB,UAArB,EAAiCR,QAAjC;AACAE,MAAAA,QAAQ,CAACZ,UAAU,CAACC,KAAD,CAAX,CAAR;AACAW,MAAAA,QAAQ,CAAChB,SAAS,EAAV,CAAR;AACAgB,MAAAA,QAAQ,CAAC;AAACb,QAAAA,IAAI,EAAE,aAAP;AAAsB4B,QAAAA,OAAO,EAAE;AAA/B,OAAD,CAAR;AACD,KAdH,EAeGR,KAfH,CAeS,UAAAC,GAAG,EAAI;AACZR,MAAAA,QAAQ,CAACV,QAAQ,EAAT,CAAR;AACAU,MAAAA,QAAQ,CAAC;AAACb,QAAAA,IAAI,EAAE,WAAP;AAAoBsB,QAAAA,KAAK,EAAED;AAA3B,OAAD,CAAR;AACD,KAlBH;AAmBD,GAtBD;AAuBD,CAxBM;AA0BP;;;;;;AAKA,OAAO,IAAMQ,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAClC,MAAM3B,KAAK,GAAGM,YAAY,CAACsB,OAAb,CAAqB,OAArB,CAAd;AACA,SAAO,UAAAjB,QAAQ,EAAI;AACjB,QAAIX,KAAK,KAAK,IAAd,EAAoB;AAClBW,MAAAA,QAAQ,CAACN,UAAU,EAAX,CAAR;AACD,KAFD,MAEO;AACLM,MAAAA,QAAQ,CAACZ,UAAU,CAACC,KAAD,CAAX,CAAR;AACD;AACF,GAND;AAOD,CATM;AAYP,OAAO,IAAM6B,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACP,KAAD,EAAW;AAC7C,SAAO,UAAAX,QAAQ,EAAI;AACjBA,IAAAA,QAAQ,CAACT,oBAAoB,EAArB,CAAR;AACAR,IAAAA,KAAK,CAACkB,IAAN,CAAW,wDAAX,EAAqE;AACnEU,MAAAA,KAAK,EAAEA;AAD4D,KAArE,EAGGT,IAHH,CAGQ,UAAAC,QAAQ,EAAI;AAChBH,MAAAA,QAAQ,CAACR,sBAAsB,EAAvB,CAAR;AACAQ,MAAAA,QAAQ,CAAC;AAACb,QAAAA,IAAI,EAAE,aAAP;AAAsB4B,QAAAA,OAAO,EAAE;AAA/B,OAAD,CAAR;AACD,KANH,EAOGR,KAPH,CAOS,UAAAC,GAAG,EAAI;AACZR,MAAAA,QAAQ,CAACP,qBAAqB,EAAtB,CAAR;AACAO,MAAAA,QAAQ,CAAC;AAACb,QAAAA,IAAI,EAAE,WAAP;AAAoBsB,QAAAA,KAAK,EAAED;AAA3B,OAAD,CAAR;AACAW,MAAAA,OAAO,CAACC,GAAR,CAAYZ,GAAZ;AACD,KAXH;AAYD,GAdD;AAeD,CAhBM","sourcesContent":["import axios from 'axios'\nimport { fetchUser } from './userActions'\nimport { fetchUserTripReports } from './tripReportActions'\n\nexport const authStart = () => {\n  return {\n    type: \"AUTH_START\"\n  }\n}\n\nexport const authSucess = token => {\n  return {\n    type: \"AUTH_SUCESS\",\n    token: token\n  }\n}\n\nexport const authFail = () => {\n  return {\n    type: \"AUTH_FAIL\"\n  }\n}\n\nexport const passwordResetPending = () => {\n  return {\n    type: \"PASSWORD_RESET_PENDING\"\n  }\n}\n\nexport const passwordResetFulfilled = () => {\n  return {\n    type: \"PASSWORD_RESET_FULFILLED\",\n  }\n}\n\nexport const passwordResetRejected = () => {\n  return {\n    type: \"PASSWORD_RESET_REJECTED\"\n  }\n}\n\n/*\nThe token stored in localStorage to authenticate the user is removed, logging\nthe user out.\n*/\nexport const authLogout = () => {\n  localStorage.removeItem('token');\n  localStorage.removeItem('username');\n  return {\n    type: \"AUTH_LOGOUT\"\n  }\n}\n\n/*\nLogs user in using axios and recieves a token from the Django API. This token\nis stored in localStorage.\n*/\nexport const authLogin = (username, password) => {\n  return dispatch => {\n    dispatch(authStart());\n    axios.post('http://localhost:8000/api/v1/rest-auth/login/', {\n      username: username,\n      password: password\n    })\n      .then(response => {\n        const token = response.data.key;\n        localStorage.setItem('token', token);\n        localStorage.setItem('username', username);\n        dispatch(authSucess(token));\n        dispatch(fetchUser());\n        dispatch(fetchUserTripReports(username));\n      })\n      .catch(err => {\n        dispatch(authFail());\n        dispatch({type: \"ADD_ERROR\", error: err});\n      })\n  }\n}\n\n/*\nSimilar to login, registers a user with the Django REST API which returns a\ntoken to authenticate the user. This token is stored in localStorage.\n*/\nexport const authRegister = (username, email, password1, password2, home) => {\n  return dispatch => {\n    localStorage.removeItem('token');\n    dispatch(authStart());\n    axios.post('http://localhost:8000/api/v1/rest-auth/registration/', {\n      username: username,\n      email: email,\n      password1: password1,\n      password2: password2,\n      home: home\n    })\n      .then(response => {\n        const token = response.data.key;\n        localStorage.setItem('token', token);\n        localStorage.setItem('username', username);\n        dispatch(authSucess(token));\n        dispatch(fetchUser());\n        dispatch({type: \"ADD_SUCCESS\", success: 'You have successfully registered.'});\n      })\n      .catch(err => {\n        dispatch(authFail());\n        dispatch({type: \"ADD_ERROR\", error: err});\n      })\n  }\n}\n\n/*\nChecks to see if the authentication token exists in localStorage. If a token\nexists, it runs the login function. If no token exits it runs the logout\nfunction.\n*/\nexport const authCheckState = () => {\n  const token = localStorage.getItem('token');\n  return dispatch => {\n    if (token === null) {\n      dispatch(authLogout());\n    } else {\n      dispatch(authSucess(token));\n    }\n  }\n}\n\n\nexport const requestPasswordReset = (email) => {\n  return dispatch => {\n    dispatch(passwordResetPending());\n    axios.post('http://localhost:8000/api/v1/rest-auth/password/reset/', {\n      email: email,\n    })\n      .then(response => {\n        dispatch(passwordResetFulfilled());\n        dispatch({type: \"ADD_SUCCESS\", success: 'An email has been sent with instructions.'});\n      })\n      .catch(err => {\n        dispatch(passwordResetRejected());\n        dispatch({type: \"ADD_ERROR\", error: err});\n        console.log(err);\n      })\n  }\n}\n"]},"metadata":{},"sourceType":"module"}