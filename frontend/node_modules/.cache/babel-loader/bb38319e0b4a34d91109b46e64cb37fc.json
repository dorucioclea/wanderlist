{"ast":null,"code":"import _classCallCheck from \"/Users/peterzernia/projects/countries/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/peterzernia/projects/countries/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/peterzernia/projects/countries/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/peterzernia/projects/countries/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/peterzernia/projects/countries/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/peterzernia/projects/countries/src/containers/Post.js\";\nimport React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport CountryModal from '../components/CountryModal';\nimport PostModal from '../components/PostModal';\nimport TripReport from '../components/TripReport';\nimport { fetchUserTripReports, postTripReport, deleteTripReport, updateTripReport } from '../actions/tripReportActions';\nimport { openPostModal, closePostModal, openUpdatePostModal, openCountryModal, closeCountryModal } from '../actions/modalActions';\nimport { DotLoader } from 'react-spinners';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nvar Post =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Post, _Component);\n\n  function Post() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Post);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Post)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      open: false\n    };\n\n    _this.handleClickOpen = function () {\n      _this.setState({\n        open: true\n      });\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        open: false\n      });\n    };\n\n    _this.handlePostSubmit = function (e) {\n      e.preventDefault();\n      var countries = []; // e.target.value must be converted into an array of numbers.\n\n      for (var i = 0, l = e.target.countries.value.length; i < l; i++) {\n        // It contains commas, which must be removed.\n        if (!isNaN(Number(e.target.countries.value[i]))) {\n          countries.push(Number(e.target.countries.value[i]));\n        }\n      }\n\n      _this.props.postTripReport(_this.props.pk, e.target.title.value, e.target.content.value, countries);\n\n      _this.props.closePostModal();\n    };\n\n    _this.handleUpdateSubmit = function (e) {\n      e.preventDefault();\n      var countries = []; // e.target.value must be converted into an array of numbers.\n\n      for (var i = 0, l = e.target.countries.value.length; i < l; i++) {\n        // It contains commas, which must be removed.\n        if (!isNaN(Number(e.target.countries.value[i]))) {\n          countries.push(Number(e.target.countries.value[i]));\n        }\n      }\n\n      _this.props.updateTripReport(_this.props.modalPost.id, _this.props.pk, e.target.title.value, e.target.content.value, countries);\n\n      _this.props.closePostModal();\n    };\n\n    return _this;\n  }\n\n  _createClass(Post, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var errorMessage = null;\n\n      if (this.props.error) {\n        errorMessage = React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, this.props.error.message);\n      }\n\n      var listTripReports = this.props.tripReports.map(function (tripReport) {\n        return React.createElement(\"div\", {\n          key: tripReport.id,\n          className: \"trip-report\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, React.createElement(TripReport, Object.assign({}, tripReport, {\n          openCountryModal: _this2.props.openCountryModal,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        })), React.createElement(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: function onClick() {\n            return _this2.props.openUpdatePostModal(tripReport);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, \"Update\"), React.createElement(Button, {\n          variant: \"contained\",\n          color: \"secondary\",\n          onClick: function onClick() {\n            return _this2.handleClickOpen();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, \"Delete\"));\n      });\n      return React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, errorMessage, React.createElement(PostModal, Object.assign({}, this.props, {\n        handlePostSubmit: this.handlePostSubmit,\n        handleUpdateSubmit: this.handleUpdateSubmit,\n        errorMessage: this.errorMessage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      })), React.createElement(CountryModal, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      })), React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        className: \"btn btn-primary\",\n        onClick: this.props.openPostModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"New Trip Report\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }), this.props.fetchingTripReports && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(DotLoader, {\n        size: 50,\n        color: '#66bb6a',\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      })), this.props.fetchedTripReports && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, listTripReports), React.createElement(Dialog, {\n        onClose: this.handleClose,\n        open: this.state.open,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(DialogContentText, {\n        id: \"alert-dialog-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Are you sure you'd like to delete this Trip Report?\"), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: function onClick() {\n          _this2.handleClose();\n\n          _this2.props.deleteTripReport(tripReport);\n        },\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Delete\"), React.createElement(Button, {\n        onClick: this.handleClose,\n        color: \"primary\",\n        autoFocus: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"Cancel\")))));\n    }\n  }]);\n\n  return Post;\n}(Component);\n\nvar mapState = function mapState(state) {\n  return {\n    error: state.tripReport.error,\n    username: state.user.user.username,\n    pk: state.user.user.pk,\n    showPostModal: state.modal.showPostModal,\n    fetchingTripReports: state.tripReport.fetchingTripReports,\n    fetchedTripReports: state.tripReport.fetchedTripReports,\n    tripReports: state.tripReport.userTripReports,\n    updatePostModal: state.modal.updatePostModal,\n    modalPost: state.modal.modalPost,\n    showCountryModal: state.modal.showCountryModal,\n    modalCountry: state.modal.modalCountry\n  };\n};\n\nvar mapDispatch = function mapDispatch(dispatch) {\n  return bindActionCreators({\n    fetchUserTripReports: fetchUserTripReports,\n    postTripReport: postTripReport,\n    deleteTripReport: deleteTripReport,\n    updateTripReport: updateTripReport,\n    openPostModal: openPostModal,\n    closePostModal: closePostModal,\n    openUpdatePostModal: openUpdatePostModal,\n    openCountryModal: openCountryModal,\n    closeCountryModal: closeCountryModal\n  }, dispatch);\n};\n\nexport default connect(mapState, mapDispatch)(Post);\nPost.propTypes = {\n  error: PropTypes.object,\n  username: PropTypes.string,\n  pk: PropTypes.number,\n  showPostModal: PropTypes.bool,\n  fetchingTripReports: PropTypes.bool,\n  fetchedTripReports: PropTypes.bool,\n  tripReports: PropTypes.array,\n  updatePostModal: PropTypes.bool,\n  modalPost: PropTypes.object,\n  showCountryModal: PropTypes.bool,\n  modalCountry: PropTypes.object,\n  fetchUserTripReports: PropTypes.func,\n  postTripReport: PropTypes.func,\n  deleteTripReport: PropTypes.func,\n  updateTripReport: PropTypes.func,\n  openPostModal: PropTypes.func,\n  closePostModal: PropTypes.func,\n  openUpdatePostModal: PropTypes.func,\n  openCountryModal: PropTypes.func,\n  closeCountryModal: PropTypes.func\n}; //this.props.updateTripReport(tripReport.id, this.props.username, tripReport.title, tripReport.content, tripReport.countries)","map":{"version":3,"sources":["/Users/peterzernia/projects/countries/src/containers/Post.js"],"names":["React","Component","bindActionCreators","connect","PropTypes","CountryModal","PostModal","TripReport","fetchUserTripReports","postTripReport","deleteTripReport","updateTripReport","openPostModal","closePostModal","openUpdatePostModal","openCountryModal","closeCountryModal","DotLoader","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Post","state","open","handleClickOpen","setState","handleClose","handlePostSubmit","e","preventDefault","countries","i","l","target","value","length","isNaN","Number","push","props","pk","title","content","handleUpdateSubmit","modalPost","id","errorMessage","error","message","listTripReports","tripReports","map","tripReport","fetchingTripReports","fetchedTripReports","mapState","username","user","showPostModal","modal","userTripReports","updatePostModal","showCountryModal","modalCountry","mapDispatch","dispatch","propTypes","object","string","number","bool","array","func"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport CountryModal from '../components/CountryModal'\nimport PostModal from '../components/PostModal'\nimport TripReport from '../components/TripReport'\nimport { fetchUserTripReports, postTripReport, deleteTripReport, updateTripReport } from '../actions/tripReportActions'\nimport { openPostModal, closePostModal, openUpdatePostModal, openCountryModal, closeCountryModal } from '../actions/modalActions'\nimport { DotLoader } from 'react-spinners'\nimport Button from '@material-ui/core/Button'\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nclass Post extends Component {\n\n  state = {\n    open: false,\n  };\n\n  handleClickOpen = () => {\n    this.setState({ open: true });\n  };\n\n  handleClose = () => {\n    this.setState({ open: false });\n  };\n\n  /*\n  handlPostSubmit will create a new trip report and handleUpdateSubmit will\n  update an existing trip report. Both functions are passed into the Post Modal.\n  If the Post Modal is opened with openPostModal, this.props.updatePostModal\n  remains false and the blank form is displayed, and the submit button will\n  create a new post. If the Post Modal is openeed with openUpdatePostModal,\n  this.props.updatePostModal will flip to true, and the pre-filled in form will\n  display and the submit button will update the existing trip report.\n  */\n  handlePostSubmit = (e) => {\n    e.preventDefault();\n    let countries =[];\n    // e.target.value must be converted into an array of numbers.\n    for (let i = 0, l = e.target.countries.value.length; i < l; i++) {\n      // It contains commas, which must be removed.\n      if (!isNaN(Number(e.target.countries.value[i]))){\n        countries.push(Number(e.target.countries.value[i]));\n      }\n    }\n    this.props.postTripReport(\n      this.props.pk,\n      e.target.title.value,\n      e.target.content.value,\n      countries\n    );\n    this.props.closePostModal();\n  }\n\n  handleUpdateSubmit = (e) => {\n    e.preventDefault();\n    let countries =[];\n    // e.target.value must be converted into an array of numbers.\n    for (let i = 0, l = e.target.countries.value.length; i < l; i++) {\n      // It contains commas, which must be removed.\n      if (!isNaN(Number(e.target.countries.value[i]))){\n        countries.push(Number(e.target.countries.value[i]));\n      }\n    }\n    this.props.updateTripReport(\n      this.props.modalPost.id,\n      this.props.pk,\n      e.target.title.value,\n      e.target.content.value,\n      countries\n    );\n    this.props.closePostModal();\n  }\n\n  render(){\n\n    let errorMessage = null;\n    if (this.props.error) {\n      errorMessage = <p>{this.props.error.message}</p>\n    }\n\n    const listTripReports = this.props.tripReports.map(tripReport =>(\n      <div key={tripReport.id} className='trip-report'>\n        <TripReport {...tripReport} openCountryModal={this.props.openCountryModal} />\n        <Button variant=\"contained\" color=\"primary\" onClick={() => this.props.openUpdatePostModal(tripReport)}>Update</Button>\n        <Button variant=\"contained\" color=\"secondary\" onClick={() => this.handleClickOpen()}>Delete</Button>\n      </div>\n    ));\n\n    return(\n      <div className=\"content\">\n        {errorMessage}\n        <PostModal {...this.props} handlePostSubmit={this.handlePostSubmit} handleUpdateSubmit={this.handleUpdateSubmit} errorMessage={this.errorMessage}/>\n        <CountryModal {...this.props} />\n        <Button variant=\"contained\" color=\"primary\" className=\"btn btn-primary\" onClick={this.props.openPostModal}>New Trip Report</Button><br/>\n        {this.props.fetchingTripReports && <div><DotLoader size={50} color={'#66bb6a'} className=\"content\" /></div>}\n        {this.props.fetchedTripReports && <div>{listTripReports}</div>}\n        <Dialog onClose={this.handleClose} open={this.state.open}>\n          <DialogContent>\n            <DialogContentText id=\"alert-dialog-description\">\n              Are you sure you'd like to delete this Trip Report?\n            </DialogContentText>\n            <DialogActions>\n            <Button onClick={() => {this.handleClose(); this.props.deleteTripReport(tripReport);}} color=\"primary\">\n              Delete\n            </Button>\n            <Button onClick={this.handleClose} color=\"primary\" autoFocus>\n              Cancel\n            </Button>\n          </DialogActions>\n          </DialogContent>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nconst mapState = state => {\n  return {\n    error: state.tripReport.error,\n    username: state.user.user.username,\n    pk: state.user.user.pk,\n    showPostModal: state.modal.showPostModal,\n    fetchingTripReports: state.tripReport.fetchingTripReports,\n    fetchedTripReports: state.tripReport.fetchedTripReports,\n    tripReports: state.tripReport.userTripReports,\n    updatePostModal: state.modal.updatePostModal,\n    modalPost: state.modal.modalPost,\n    showCountryModal: state.modal.showCountryModal,\n    modalCountry: state.modal.modalCountry,\n  };\n}\n\nconst mapDispatch = dispatch => {\n  return bindActionCreators({\n    fetchUserTripReports,\n    postTripReport,\n    deleteTripReport,\n    updateTripReport,\n    openPostModal,\n    closePostModal,\n    openUpdatePostModal,\n    openCountryModal,\n    closeCountryModal\n  }, dispatch);\n}\n\nexport default connect(mapState, mapDispatch)(Post);\n\nPost.propTypes = {\n  error: PropTypes.object,\n  username: PropTypes.string,\n  pk: PropTypes.number,\n  showPostModal: PropTypes.bool,\n  fetchingTripReports: PropTypes.bool,\n  fetchedTripReports: PropTypes.bool,\n  tripReports: PropTypes.array,\n  updatePostModal: PropTypes.bool,\n  modalPost: PropTypes.object,\n  showCountryModal: PropTypes.bool,\n  modalCountry: PropTypes.object,\n  fetchUserTripReports: PropTypes.func,\n  postTripReport: PropTypes.func,\n  deleteTripReport: PropTypes.func,\n  updateTripReport: PropTypes.func,\n  openPostModal: PropTypes.func,\n  closePostModal: PropTypes.func,\n  openUpdatePostModal: PropTypes.func,\n  openCountryModal: PropTypes.func,\n  closeCountryModal: PropTypes.func\n};\n\n//this.props.updateTripReport(tripReport.id, this.props.username, tripReport.title, tripReport.content, tripReport.countries)\n"]},"metadata":{},"sourceType":"module"}